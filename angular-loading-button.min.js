/**
 * angular-loading-button - v0.1.1
 * Loading button directive for AngularJS
 * https://github.com/tiste/angular-loading-button
 * Licensed WTFPL
 */
angular.module("loadingButton",[]).factory("loadingButton",["$log",function(e){return{dropper:function(e){return this.inc(e,.1*Math.random())},inc:function(e,l){return e=this.limit(e+l,.05,.95),this.set(e)},limit:function(e,l,n){var t=e;return l>e&&(t=l),e>n&&(t=n),t},set:function(e){return this.limit(e,.05,1)}}}]).directive("loadingButton",["$log","$interval","$timeout","loadingButton",function(e,l,n,t){return{restrict:"A",scope:{completed:"=lbCompleted",value:"=?lbValue",completedDelay:"=?lbCompletedDelay",clearDelay:"=?lbClearDelay"},link:function(e,a,o){"undefined"==typeof e.value&&(e.value=0),"undefined"==typeof e.completedDelay&&(e.clearDelay=400),"undefined"==typeof e.clearDelay&&(e.clearDelay=3e3);var i,u=!1,c=function(){u=!0,a.addClass("loading"),1!==e.value&&(i=l(function(){e.value<.95&&(e.value=t.dropper(e.value))},500))},r=function(t){e.completed=void 0,e.value=1,l.cancel(i),n(function(){a.removeClass("loading"),t?a.addClass("success"):a.addClass("error")},e.completedDelay),n(function(){a.removeClass("success error"),u=!1,e.value=0},e.clearDelay)};a.bind("click",function(){u||c()}),e.$watch("completed",function(e){1==e?r(!0):0==e&&r(!1)}),e.$watch("value",function(e){e>0&&!u&&c()})}}}]);