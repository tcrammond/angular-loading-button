/**
 * angular-loading-button - v0.1.1
 * Loading button directive for AngularJS
 * https://github.com/tiste/angular-loading-button
 * Licensed WTFPL
 */
angular.module("loadingButton",[]).factory("loadingButton",["$log",function(e){return{dropper:function(e){return this.inc(e,.1*Math.random())},inc:function(e,t){return e=this.limit(e+t,.05,.95),this.set(e)},limit:function(e,t,n){var l=e;return t>e&&(l=t),e>n&&(l=n),l},set:function(e){return this.limit(e,.05,1)}}}]).directive("loadingButton",["$log","$interval","$timeout","loadingButton",function(e,t,n,l){return{restrict:"A",scope:{completed:"=lbCompleted",value:"=?lbValue",completedDelay:"=?lbCompletedDelay",resetDelay:"=?lbResetDelay"},link:function(e,o,a){"undefined"==typeof e.value&&(e.value=0),"undefined"==typeof e.completedDelay&&(e.completedDelay=400),"undefined"==typeof e.resetDelay&&(e.resetDelay=3e3);var i,u=!1,c=function(){u=!0,o.addClass("loading"),1!==e.value&&(i=t(function(){e.value<.95&&(e.value=l.dropper(e.value))},500))},r=function(l){e.completed=void 0,e.value=1,t.cancel(i),n(function(){o.removeClass("loading"),l?o.addClass("success"):o.addClass("error")},e.completedDelay),n(function(){o.removeClass("success error"),u=!1,e.value=0},e.resetDelay)};o.bind("click",function(){u||c()}),e.$watch("completed",function(e){1==e?r(!0):0==e&&r(!1)}),e.$watch("value",function(e){e>0&&!u&&c()})}}}]);